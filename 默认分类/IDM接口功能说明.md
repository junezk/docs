# IDM接口功能说明

原创2021-07-29 14:04·[数通畅联](https://www.toutiao.com/c/user/token/MS4wLjABAAAAVsCvc8SHrouiq6rzW6tsGQxaZeZfxBjPTy5BXGZF8-U/?source=tuwen_detail)

**IDM身份管理系统是为解决企业内部多系统之间的用户信息不一致而开发的**，主要定位于解决企业在5A功能上的需求，即：Account账号管理、Authentication认证管理、Authorization授权管理、Audit审计管理、App Control应用管控五个方面的实际需求，进而规范用户身份信息，保证系统安全，提高工作效率。

**IDM平台内置丰富的对接接口**，包含数据初始化，日常维护的增、改、删、查及日志管控，同时平台预置对接认证过程中的统一认证协议接口，满足面向不同协议、架构的系统进行统一认证的管控及管理，本篇文档将主要介绍IDM接口的功能。

# 整体介绍

IDM身份管理平台满足对企业信息系统的**统一用户管理、统一身份认证、统一授权管理以及安全审计**的要求，能够实现各业务系统的统一登录和集中访问，实现用户身份和权限的统一认证与授权管理，为企业不同的业务系统提供统一的用户管理和认证服务。

**1.功能架构**

**IDM主要对组织、角色、人员进行管理，并对其所有的状态进行记录**，如：初始化、审批中、已启用、已禁用等。账户统一管理可以实现从HR系统中获取组织用户数据，也可直接在IDM系统中录入数据，用户信息中的部分属性信息根据同步策略由HR系统或其它指定系统同步更新到用户目录，其它用户信息可在应用系统中各自进行维护，通过IDM统一用户信息后，发送到各个业务系统。

![IDM接口功能说明](IDM接口功能说明.assets/a2fbbe56659441bdb7e8e756398ba2de)



**2.系统架构**

IDM主要是实现统一认证、授权、审计管理，**提高企业身份认证及访问安全**，建立授权流程审批机制，使用户身份信息、授权信息、审批信息等操作更加规范化、标准化，提高整体IT架构的风险防范能力。

![IDM接口功能说明](IDM接口功能说明.assets/e0f6c45561f14019b1e08ba05d927708)



消除企业系统间的信息孤岛，为各系统提供统一身份认证、用户身份管理服务，逐步实现系统身份系统的整合，构建面向用户的认证和授权服务，使业务操作更流畅。为简化IT运维提供强大的技术手段和标准，实现账户数据自动化同步操作，同时制定合规的安全服务规范，构建统一的、支撑企业级的认证授权安全服务基础设施。

**3.产品接口**

IDM平台内置丰富的对接接口，包含数据初始化，日常维护的增、改、删、查及日志管控，同时平台预置对接认证过程中的统一认证协议接口，满足面向不同协议、架构的系统进行统一认证的管控及管理，下面主要从整体介绍IDM的接口。

![IDM接口功能说明](IDM接口功能说明.assets/0ceb5883ca494a9aac94a5a8854d5a16)



1.**认证接口**：业务系统在系统登录认证时，向IDM身份管理平台发起请求URL跳转至IDM统一认证登录页面，带有系统编码、系统密码、返回的URL地址，IDM系统认证后跳转至redirect_uri中，同时带有code信息。

2.**数据同步接口**：IDM统一身份系统主要管理用户信息，而用户一般源头都在HR系统等人力资源系统中，所以数据同步就是从HR系统中获取数据同步到IDM产品中。

3.**数据查询接口**：通过数据查询接口可以获取IDM中组织、人员、岗位的信息。

4.**统一权限接口**：包括角色导入接口、权限资源导入接口，可以将下游各业务系统的权限资源信息同步到IDM中进行统一管理。

5.**任务分发接口**：当在IDM中对组织、人员、岗位等信息进行操作时，会生成对应的任务和操作信息，然后通过任务分发接口分发到下游各个业务系统。

# 认证接口

业务系统在系统登录认证时，向IDM身份管理平台发起请求URL跳转至IDM统一认证登录页面，带有系统编码、系统密码、返回的URL地址，IDM系统认证后跳转至redirect_uri中，同时带有code信息。

**1.系统请求认证**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/7073c74afc7b4ae89953334516837dc1)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/16487ed129004b799a86ef9e1feda7bd)



3.出参说明：

![IDM接口功能说明](IDM接口功能说明.assets/2afd71ace6ba41cb9e216b16c926c98a)



**2.获取认证票据**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/67bdc3739b53419e9e81a60a1c3bbb3d)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/2e3b7f72694b4ebab3e57afda3ebcf15)



3.出参说明：

![IDM接口功能说明](IDM接口功能说明.assets/ad782e3456944a258c6f8adcdb330e45)



**3.获取用户信息**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/690b34c51dba4656bb8deba3c8b86e3c)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/ac0e4d359c964c7eb620b85c838164d1)



3.出参说明：

![IDM接口功能说明](IDM接口功能说明.assets/a00ad773743041afa63c25819db9ad40)



# 数据查询

IDM数据查询接口能够获取IDM中组织、人员、岗位的具体信息，下游系统可以根据应用权限等查询对应的信息，下面主要介绍一下数据查询相关接口。

**1.组织查询接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/a8dec5ca077c492b852c72e21ed1efb4)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/e3b1e12084e04649bd73c504e3273c11)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/3c9171b6093e41f7a15d8630117d52ad)



![IDM接口功能说明](IDM接口功能说明.assets/3efb175d139145c79ffceaa7536ca3f4)



![IDM接口功能说明](IDM接口功能说明.assets/dc2b7213e8dd4bd584cc65da97456664)



**2.岗位查询接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/4f8f783eac0145009f93dfe53ccc5962)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/7c15a4977ed246e0ae8adb2c9dab4256)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/03a91c8a4d4045639699b5e5228acb2c)



![IDM接口功能说明](IDM接口功能说明.assets/ec00d1abbe0142b9afd4978fa9307a1a)



**3.人员查询接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/e3109f3dab334458a50e35a7016b576b)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/b7a9ae19df9042e0aa2a6df404f05256)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/69b0d616dab34e5a814ac80bf2387f3a)



![IDM接口功能说明](IDM接口功能说明.assets/b3196753641240a89d6b3756ea16ca3a)



![IDM接口功能说明](IDM接口功能说明.assets/6f69d3fe257f4c4199b70c3de44022d6)



![IDM接口功能说明](IDM接口功能说明.assets/b20f575eb4314f78a0a280e5fec5dfad)



# 数据同步

IDM是统一身份系统，它主要管理的就是用户信息，而用户一般源头都在HR系统等人力资源系统中，所以数据同步就是从HR系统中获取数据同步到IDM产品中，下面主要介绍一下数据同步相关接口。

**1.组织导入接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/6f55a8979c0d48b9952e3927ba874cf7)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/0a2d7a2ec8ba4d9e9bd2b71afc21335b)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/3ab412381b85412088c98fb37c0da877)



**2.岗位导入接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/bf9da2c57b3e45999832725f491ee43a)



2.入参说明：

入参类型（jsonArray）

![IDM接口功能说明](IDM接口功能说明.assets/dd2fe7c37b9b488388242a56b4331ef8)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/f2c26840bab54a47af33dc2942fbab9e)



**3.人员导入接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/4d77c48644fd4fcfafa86dd4148bc45c)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/2e87b2822f6c4d63a2b84602e0b7d5d4)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/1651052ce961488f94ed40ffe7337368)



# 统一权限

统一权限相关接口包括角色导入接口、功能资源导入接口、数据资源导入接口、接口资源导入接口，可以将业务系统的角色和权限资源信息导入到IDM系统中。

**1.角色导入接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/90ca4677a3b645728a4b9c815fd6fa18)



2.入参说明：

入参类型：jsonObject

![IDM接口功能说明](IDM接口功能说明.assets/26a2b39763b640dc8d26e2dbab6e8010)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/2524c4958f864bf686390393b6c314e7)



**2.功能资源导入**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/b972226e706b4ab69068049c3af1978b)



2.入参说明：

入参类型：jsonObject

![IDM接口功能说明](IDM接口功能说明.assets/f993049bbcd945f5aaa8d998e767efcf)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/5b78208b7b204edf8fbd57ffc2b9ddc6)



**3.数据资源导入**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/7244eb01d5824d4d8f2d7b0a9beebb4a)



2.入参说明：

入参类型（jsonObject）

![IDM接口功能说明](IDM接口功能说明.assets/44458a3ffdaa482fa92cfde5ad0052b1)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/dab36f94cac64e1d90ee3f4894bf4959)



**4.接口资源导入**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/427582843fc549a4bd1c4ea9c08c3b3b)



2.入参说明：

入参类型（jsonObject）

![IDM接口功能说明](IDM接口功能说明.assets/a90995efd3354521b01b5dcaebc2c3d2)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/5ffb8059644b4a69aab4ef3f6520c185)



**5.获取权限接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/4a1b3f2f3f58409a9c9eebf19d601b84)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/ab2378671d0549a797dbb6909cab201c)



3.出参说明（jsonObject）：

![IDM接口功能说明](IDM接口功能说明.assets/9a28d1b0c5aa46ada58727feae648349)



出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/0a6ff8d890e84e3cbb4efb9ec9518660)



![IDM接口功能说明](IDM接口功能说明.assets/aa5413878f974741873b8d4ec441f588)



![IDM接口功能说明](IDM接口功能说明.assets/3708ac24b5bc4ef6aefd889d8ed5702b)



![IDM接口功能说明](IDM接口功能说明.assets/d32366a53bb34ff48f7024a484336e82)



![IDM接口功能说明](IDM接口功能说明.assets/06ca928b47674f3796a65fe28c11c83c)



# 任务分发

当在IDM中对组织、人员、岗位等信息进行操作时，会生成对应的任务和操作信息，然后通过任务分发接口分发到下游各个业务系统，下面将主要介绍任务分发的相关接口。

**1.任务分发接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/de6b6ac790af4ab8b802baf6fcdb0748)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/d51c6b6b5b2949f38149b8ce7c91c501)



3.出参样例：

![IDM接口功能说明](IDM接口功能说明.assets/f151c35832a647c881ea9dc22db5c886)



![IDM接口功能说明](IDM接口功能说明.assets/58dc1cd444514347821b4c1731372bd8)



![IDM接口功能说明](IDM接口功能说明.assets/d976f42d418b4af2976c12ccc428fdbe)



![IDM接口功能说明](IDM接口功能说明.assets/ade4be8a0c23431d8addf3c2e5880beb)



![IDM接口功能说明](IDM接口功能说明.assets/39daeac156464a439a6cec563fe0be9a)



![IDM接口功能说明](IDM接口功能说明.assets/d295b9c062b74739b17e5dcdf3cfc57a)



![IDM接口功能说明](IDM接口功能说明.assets/5887c44564614c859ac338a78a60559a)



**2.回写日志接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/9fa1d91614344268b19e33ef97419188)



2.入参说明：

![IDM接口功能说明](IDM接口功能说明.assets/aac9a674636c40a3b27d7986705a073c)



3.出参说明：

调用成功：返回“success”；

调用失败：返回“fail”。

**3.修改日志接口**

1.调用地址：

![IDM接口功能说明](IDM接口功能说明.assets/bb66f3f9adaa4d9681fd5c17f8759984)



2.入参说明：

入参类型：jsonArray

![IDM接口功能说明](IDM接口功能说明.assets/c1fcb7edc2b44ae09d378249065dada5)



3.出参说明：

调用成功：返回“success”；

调用失败：返回“fail”。

# 心得总结

在本次开发过程中，自己的技术能力得到了提升，对IDM产品的理解逐步深入，现在将我在本工作中的收获总结如下。

**1.意识形态**

首先，在工作中要勤于总结，在遇到问题时要及时**和领导进行沟通交互**，只有这样问题才能得到很好的解决。其次，**不要拿自己当小弟培养**，领导让干什么就干什么，自己要多想一些事情。最后，遇到问题不要试图耍小聪明、试图遮掩，**要及时暴露问题**。

**2.产品理解**

IDM身份管理平台主要提供统一认证、统一用户、统一权限、统一审计、统一应用管控的功能，IDM的设计理念在于加强企业账户管理、支撑企业业务运营、简化企业内部运维，实现统一认证、授权、审计管理，**提高企业身份认证及访问安全，建立授权流程审批机制**，使用户身份信息、授权信息、审批信息等操作更加规范化、标准化，提高整体IT架构的风险防范能力，为简化IT运维提供强大的技术手段和标准，实现账户数据自动化同步操作的同时制定合规的安全服务规范，构建统一的、支撑企业级的认证授权安全服务基础设施。

# 3.总结反思

对于开发人员来说，对自己开发出来的功能进行测试时，往往会形成一种思维定式，功能按照自己的开发过程进行操作，大多数不会出现什么问题就感觉功能完善了，这是个错误的想法。在测试自己开发的功能时，**要换位思考，摆脱思维定式**，不能按照自己原本想的过程进行操作，要从客户的角度来操作功能，这样才能满足客户的需求。

通过参与IDM统一权限的开发及测试工作，发现自己开发出的功能进行测试时，会出现很多问题，需要多次的修改才能使功能满足客户的需求。出现这种问题的主要是因为自己在开发功能时没有多方面考虑问题，只考虑到本次开发的功能，没有考虑其它的功能是否会受到影响，导致给自己的工作带来不必要的麻烦。所以，以后不论是开发还是测试都要**学会多方位思考，从多方面考虑问题**，这样才能不断提升自己的能力。